<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>LUNAD</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZml0emtlbmpvaG4iLCJhIjoiY2xxcWp2MWw1M3VwYjJtbm05dnc4eHY4MSJ9.kTofeMVuyWEX7X5NFU5kYg';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/dark-v11', // style URL
        center: [123.740953,13.154756], // starting position [lng, lat]
        zoom: 13.5 // starting zoom
    });

    const geojson = {
        'type': 'FeatureCollection',
        'features': [
            {
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'coordinates': [
                    [
            123.75254662911044,
            13.146920130173143
      	],
      	[
            123.75247497544467,
            13.146738561536552
      	],
      	[
            123.75246388733706,
            13.146651588526453
      	],
      	[
            123.7524688214807,
            13.146523840459594
      	],
      	[
            123.75265354707267,
            13.14592084184521
      	],
      	[
            123.75301500469516,
            13.144922463326225
      	],
      	[
            123.75306542986806,
            13.144583431562793
      	],
      	[
            123.75302656687023,
            13.14441416974357
      	],
      	[
            123.7528263062485,
            13.144026288149036
      	],
      	[
            123.75254321663442,
            13.143542374567218
      	],
      	[
            123.75206837609574,
            13.142852381529849
      	],
      	[
            123.75157888704996,
            13.14241621300475
      	],
      	[
            123.75092166492567,
            13.142021581586704
      	],
      	[
            123.75001800332569,
            13.141736661262527
      	],
      	[
            123.74907803768997,
            13.141504649945418
      	],
      	[
            123.74817598717192,
            13.141052890609288
      	],
      	[
            123.74695926919622,
            13.140411055049043
      	],
      	[
            123.74493349875291,
            13.13928321866247
      	],
      	[
            123.74407551284975,
            13.139106700542925
      	],
      	[
            123.74122030949133,
            13.138640910951821
      	],
      	[
            123.73913662222907,
            13.138548851089425
      	],
      	[
            123.73712090182494,
            13.138536068995151
      	],
      	[
            123.73611733929124,
            13.138529456426468
      	],
      	[
            123.73521812107225,
            13.138504042463566
      	],
      	[
            123.73515772384411,
            13.138494245314249
      	],
      	[
            123.73512153557238,
            13.138859290635125
      	],
      	[
            123.73511907455611,
            13.139074386236175
      	],
      	[
            123.73504389044308,
            13.139186421864991
      	],
      	[
            123.73414043457439,
            13.139192670439343
      	],
      	[
            123.73404816983356,
            13.139155532660027
      	],
      	[
            123.73400480792338,
            13.139018709874932
      	],
      	[
            123.73397068190309,
            13.138698145137937
      	],
      	[
            123.73376711516158,
            13.13878251692951
      	],
      	[
            123.73323546184247,
            13.13879113380122
      	],
      	[
            123.73285142000623,
            13.138799827969933
      	],
      	[
            123.73243130423396,
            13.138997962930233
      	],
      	[
            123.73165435202895,
            13.139376088267966
      	],
      	[
            123.73121921837827,
            13.139664484537164
      	],
      	[
            123.73029820196314,
            13.140352815186418
      	],
      	[
            123.72925575450677,
            13.141467799076992
      	],
      	[
            123.72867222144527,
            13.142140547964374
      	],
      	[
            123.72761268851423,
            13.14279310330781
      	],
      	[
            123.72704555093173,
            13.14314358857618
      	],
      	[
            123.7259004053821,
            13.14401486096412
      	],
      	[
            123.72464029393285,
            13.145088891156703
      	],
      	[
            123.72355135002334,
            13.145899936497173
      	],
      	[
            123.72127741498451,
            13.147672327401892
      	],
      	[
            123.72089432176631,
            13.147862521207713
      	],
      	[
            123.71953887485449,
            13.148196850066128
      	],
      	[
            123.71726377037834,
            13.148802204785625
      	],
      	[
            123.71691219647818,
            13.148896830395358
      	],
      	[
            123.71687758578656,
            13.149172725387814
      	],
      	[
            123.71678580391529,
            13.14975642019941
      	],
      	[
            123.71582668421411,
            13.149552900530907
      	],
      	[
            123.71481465026471,
            13.149306865577444
      	],
      	[
            123.71403385753848,
            13.149081292339474
      	],
      	[
            123.71280644137346,
            13.148710790686664
      	],
      	[
            123.7117997240457,
            13.14839570353054
      	],
      	[
            123.7116566184443,
            13.14834325112659
      	],
      	[
            123.7120833310488,
            13.147973721647475
      	],
      	[
            123.71333804493435,
            13.148382353998272
      	],
      	[
            123.71409023718365,
            13.148637626437761
      	],
      	[
            123.71504380852224,
            13.148986356401664
      	],
      	[
            123.716795425758,
            13.148903762806555
      	],
      	[
            123.71946176645201,
            13.148188063076546
      	],
      	[
            123.72075659563353,
            13.147874953213233
      	],
      	[
            123.72096839838593,
            13.147801276361847
      	],
      	[
            123.72127042223019,
            13.14763757964549
      	],
      	[
            123.72327877884845,
            13.146066718653614
      	],
      	[
            123.72417855738877,
            13.145375658185785
      	],
      	[
            123.72456739892328,
            13.145090077828144
      	],
      	[
            123.72622958132564,
            13.143709372848093
      	],
      	[
            123.72704777057072,
            13.143087906038119
      	],
      	[
            123.7286599082235,
            13.142109865489374
      	],
      	[
            123.7293596386238,
            13.141308442131304
      	],
      	[
            123.73027708474211,
            13.140341033499126
      	],
      	[
            123.7310480299227,
            13.13975809847318
      	],
      	[
            123.73155423406934,
            13.139415835634182
      	],
      	[
            123.73180234261002,
            13.139276864735834
      	],
      	[
            123.7325183577214,
            13.138929967580424
      	],
      	[
            123.73283217113527,
            13.13876904313085
      	],
      	[
            123.7331463625207,
            13.138770009364265
      	],
      	[
            123.73374924732394,
            13.13876763187956
      	],
      	[
            123.73395777993056,
            13.138684522858682
      	],
      	[
            123.73409820667888,
            13.138558202949667
      	],
      	[
            123.73422406900102,
            13.138487982439116
      	],
      	[
            123.73509343271729,
            13.138487230339877
      	],
      	[
            123.7352813091299,
            13.13848323410221
      	],
      	[
            123.73559853761657,
            13.138500749261937
      	],
      	[
            123.73605457751029,
            13.138514165214076
      	],
      	[
            123.73706576875577,
            13.13851996129793
      	],
      	[
            123.73819893269899,
            13.138524497918752
      	],
      	[
            123.73917725274725,
            13.138538721658662
      	],
      	[
            123.74040628253704,
            13.138582533595567
      	],
      	[
            123.74110405002892,
            13.138619689034826
      	],
      	[
            123.74118034155333,
            13.138620164596958
      	],
      	[
            123.7414349367209,
            13.138656032706919
      	],
      	[
            123.74202337186347,
            13.138760825279846
      	],
      	[
            123.7425822843137,
            13.138854281013792
      	],
      	[
            123.74323356669328,
            13.138958864680475
      	],
      	[
            123.7436476166443,
            13.139027849348963
      	],
      	[
            123.74410079967538,
            13.139105636251116
      	],
      	[
            123.74428083745943,
            13.139145034014675
      	],
      	[
            123.7445210222574,
            13.139193387928316
      	],
      	[
            123.74473076018535,
            13.13923415550839
      	],
      	[
            123.7448949185781,
            13.139264129224458
      	],
      	[
            123.74492612160503,
            13.139269797408744
      	],
      	[
            123.74514121339342,
            13.139385059757572
      	],
      	[
            123.74543185982645,
            13.139547884017176
      	],
      	[
            123.74579153109403,
            13.139749195334176
      	],
      	[
            123.74605884546486,
            13.139897798907427
      	],
      	[
            123.74651238488076,
            13.140141236580888
      	],
      	[
            123.74690908754502,
            13.1403569660948
      	],
      	[
            123.74724205383734,
            13.140543539197921
      	],
      	[
            123.74743309124511,
            13.140650280114386
      	],
      	[
            123.7476459086713,
            13.14075833002751
      	],
      	[
            123.7481206456485,
            13.141005387567802
      	],
      	[
            123.74906929680827,
            13.141482014690851
      	],
      	[
            123.74946608818095,
            13.141584166307752
      	],
      	[
            123.74991193068877,
            13.141697623455244
      	],
      	[
            123.75032279513329,
            13.141812293631531
      	],
      	[
            123.75069629882881,
            13.1419306787364
      	],
      	[
            123.75091513888151,
            13.142003058093522
      	],
      	[
            123.75119439913101,
            13.142170526862543
      	],
      	[
            123.75158873207494,
            13.14239949178311
      	],
      	[
            123.75206216847192,
            13.142824656958439
      	],
      	[
            123.75255267082497,
            13.143515502091248
      	],
      	[
            123.75287631413948,
            13.144080195974496
      	],
      	[
            123.7530548496689,
            13.144414637192767
      	],
      	[
            123.75307896408367,
            13.14453394772859
      	],
      	[
            123.7531783991152,
            13.144566911658373
      	],
      	[
            123.75337227332045,
            13.144777356399828
      	],
      	[
            123.75361639169108,
            13.145410530598696
      	],
      	[
            123.75367786213366,
            13.145763249093292
      	],
      	[
            123.75366193423491,
            13.14603955850582
      	],
      	[
            123.7534494535243,
            13.146548581276477
      	],
      	[
            123.75408234440198,
            13.146616695399572
      	],
      	[
            123.75402516658647,
            13.146799397328294
      	],
      	[
            123.75382131093028,
            13.147381668698316
      	],
      	[
            123.75367648998355,
            13.147880509623661
      	],
      	[
            123.75348259676355,
            13.148539460377563
      	],
      	[
            123.75335425935134,
            13.149108507953983
      	],
      	[
            123.75325951964533,
            13.149423720185084
      	],
      	[
            123.75302902108814,
            13.150186355236727
      	],
      	[
            123.75264112800392,
            13.15012007640847
      	],
      	[
            123.75206993073482,
            13.149976109526335
      	],
      	[
            123.75201082574529,
            13.149948361097813
      	],
      	[
            123.75192264542835,
            13.14958448264521
      	],
      	[
            123.75179005953248,
            13.149092841230598
      	],
      	[
            123.7517178153235,
            13.148726974414032
      	],
      	[
            123.75181061704677,
            13.148485669822108
      	],
      	[
            123.75250811166921,
            13.147624821481031
      	],
      	[
            123.75281942052686,
            13.14729151353012
      	],
      	[
            123.75254729851281,
            13.146924406036547
      	]
                    ],
                    'type': 'LineString'
                }
            }
        ]
    };

    map.on('load', () => {
        map.addSource('line', {
            type: 'geojson',
            data: geojson
        });

        // add a line layer without line-dasharray defined to fill the gaps in the dashed line
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-background',
            paint: {
                'line-color': 'yellow',
                'line-width': 6,
                'line-opacity': 0.4
            }
        });

        // add a line layer with line-dasharray set to the first value in dashArraySequence
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-dashed',
            paint: {
                'line-color': 'yellow',
                'line-width': 6,
                'line-dasharray': [0, 4, 3]
            }
        });

        // technique based on https://jsfiddle.net/2mws8y3q/
        // an array of valid line-dasharray values, specifying the lengths of the alternating dashes and gaps that form the dash pattern
        const dashArraySequence = [
            [0, 4, 3],
            [0.5, 4, 2.5],
            [1, 4, 2],
            [1.5, 4, 1.5],
            [2, 4, 1],
            [2.5, 4, 0.5],
            [3, 4, 0],
            [0, 0.5, 3, 3.5],
            [0, 1, 3, 3],
            [0, 1.5, 3, 2.5],
            [0, 2, 3, 2],
            [0, 2.5, 3, 1.5],
            [0, 3, 3, 1],
            [0, 3.5, 3, 0.5]
        ];

        let step = 0;

        function animateDashArray(timestamp) {
            // Update line-dasharray using the next value in dashArraySequence. The
            // divisor in the expression `timestamp / 50` controls the animation speed.
            const newStep = parseInt(
                (timestamp / 50) % dashArraySequence.length
            );

            if (newStep !== step) {
                map.setPaintProperty(
                    'line-dashed',
                    'line-dasharray',
                    dashArraySequence[step]
                );
                step = newStep;
            }

            // Request the next frame of the animation.
            requestAnimationFrame(animateDashArray);
        }

        // start the animation
        animateDashArray(0);
    });

        // Add geolocate control to the map.
        map.addControl(
        new mapboxgl.GeolocateControl({
        positionOptions: {
        enableHighAccuracy: true
},
        // When active the map will receive updates to the device's location as it changes.
        trackUserLocation: true,
        // Draw an arrow next to the location dot to indicate which direction the device is heading.
        showUserHeading: true
})
);
</script>

</body>
</html>