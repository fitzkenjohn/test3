<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>LUNAD:Loop 1</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZml0emtlbmpvaG4iLCJhIjoiY2xxcWp2MWw1M3VwYjJtbm05dnc4eHY4MSJ9.kTofeMVuyWEX7X5NFU5kYg';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/dark-v11', // style URL
        center: [123.740953,13.154756], // starting position [lng, lat]
        zoom: 13.5 // starting zoom
    });

    const geojson = {
        'type': 'FeatureCollection',
        'features': [
            {
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'coordinates': [
                    [
            123.75246447334655,
            13.146675673483728
          ],
          [
            123.7524644735891,
            13.14654125828909
          ],
          [
            123.75250924098117,
            13.1463777803324
          ],
          [
            123.75265846562087,
            13.145912775771777
          ],
          [
            123.75291960861966,
            13.145164406771812
          ],
          [
            123.75296085357087,
            13.145024016088726
          ],
          [
            123.75303546588998,
            13.144816942710932
          ],
          [
            123.7530615802026,
            13.1446897923052
          ],
          [
            123.75305038835353,
            13.144533578858727
          ],
          [
            123.7530168129303,
            13.144380998238589
          ],
          [
            123.75280043720323,
            13.143977748864884
          ],
          [
            123.7526883031216,
            13.143742472670283
          ],
          [
            123.75253907849327,
            13.143535398236466
          ],
          [
            123.75247938863771,
            13.143444576050342
          ],
          [
            123.75230969445312,
            13.143197539543124
          ],
          [
            123.75204855133393,
            13.14281608560944
          ],
          [
            123.75176129376149,
            13.142550884005232
          ],
          [
            123.75153372662095,
            13.1423656061436
          ],
          [
            123.7513434652065,
            13.14226388480752
          ],
          [
            123.75087713820943,
            13.142027745830049
          ],
          [
            123.75082490958562,
            13.142002315464936
          ],
          [
            123.75051153784415,
            13.141886062334336
          ],
          [
            123.75043692552498,
            13.14187153068876
          ],
          [
            123.74999063243234,
            13.141748012247177
          ],
          [
            123.74941611757174,
            13.141602695674678
          ],
          [
            123.7493265827876,
            13.141573632349903
          ],
          [
            123.7491064764447,
            13.14151187277325
          ],
          [
            123.74905051720492,
            13.141490075271733
          ],
          [
            123.74886483742881,
            13.141397657470236
          ],
          [
            123.74862234739066,
            13.141274138212879
          ],
          [
            123.74831643752668,
            13.141132453945048
          ],
          [
            123.7481444110357,
            13.141040816666205
          ],
          [
            123.74748409200691,
            13.140699321600138
          ],
          [
            123.74692076874817,
            13.140397788534841
          ],
          [
            123.74672552850348,
            13.140305098808895
          ],
          [
            123.74638977306518,
            13.140108920262094
          ],
          [
            123.74621070349849,
            13.140003565052425
          ],
          [
            123.74533973520812,
            13.139504585331181
          ],
          [
            123.74495548179726,
            13.139290241401284
          ],
          [
            123.7448622163987,
            13.139253911902571
          ],
          [
            123.74458615081602,
            13.139195784693243
          ],
          [
            123.74401163595542,
            13.139108593853393
          ],
          [
            123.74381764251763,
            13.139079530127916
          ],
          [
            123.7437629863561,
            13.13907097549594
          ],
          [
            123.74361782113976,
            13.139032689148962
          ],
          [
            123.74231202361,
            13.13881762982463
          ],
          [
            123.74218802832388,
            13.138814684718255
          ],
          [
            123.74160346014679,
            13.138717568674366
          ],
          [
            123.74119215870195,
            13.138664556730745
          ],
          [
            123.7398282234833,
            13.138585038563832
          ],
          [
            123.73967398544238,
            13.138585038563832
          ],
          [
            123.73912961612507,
            13.138570313218992
          ],
          [
            123.73802184272756,
            13.138540862192201
          ],
          [
            123.73709037128287,
            13.138537915886488
          ],
          [
            123.73642200767745,
            13.138532026387054
          ],
          [
            123.73607421601622,
            13.138523191057601
          ],
          [
            123.7351608845014,
            13.138493740459921
          ],
          [
            123.7351276171305,
            13.138805511766805
          ],
          [
            123.73512156857998,
            13.139008724035648
          ],
          [
            123.73512156857998,
            13.139100022246268
          ],
          [
            123.73503688887092,
            13.139200155728389
          ],
          [
            123.73457719902206,
            13.139197210626662
          ],
          [
            123.73417799311704,
            13.139197209295162
          ],
          [
            123.73410541050896,
            13.139182483784708
          ],
          [
            123.73405399782854,
            13.139158922967908
          ],
          [
            123.73402073079967,
            13.139114746429144
          ],
          [
            123.73399956087417,
            13.139008722704205
          ],
          [
            123.73397536666994,
            13.138770169153915
          ],
          [
            123.73396629384536,
            13.138708321899955
          ],
          [
            123.73391185688865,
            13.138740718083042
          ],
          [
            123.73387556558566,
            13.138761333833031
          ],
          [
            123.73382717717948,
            13.138770169153915
          ],
          [
            123.73373644891984,
            13.13879373000917
          ],
          [
            123.73321022501568,
            13.138802565328874
          ],
          [
            123.7328533609276,
            13.138802565514226
          ],
          [
            123.7327838025958,
            13.138817291046394
          ],
          [
            123.73271726853812,
            13.138858522532843
          ],
          [
            123.73238762252839,
            13.139032283720795
          ],
          [
            123.73151965515319,
            13.139456378603612
          ],
          [
            123.73122327635446,
            13.139656644619492
          ],
          [
            123.73048399791998,
            13.140192346226854
          ],
          [
            123.73016644889566,
            13.140478019773312
          ],
          [
            123.73006967208545,
            13.140569317437425
          ],
          [
            123.7292289232492,
            13.141494072483653
          ],
          [
            123.72891835357069,
            13.14188191627477
          ],
          [
            123.72884274668831,
            13.14197615848505
          ],
          [
            123.72870665429889,
            13.142096906263504
          ],
          [
            123.72847378509925,
            13.142267720093798
          ],
          [
            123.72818950424124,
            13.142420863268498
          ],
          [
            123.7270503547453,
            13.143111975594167
          ],
          [
            123.72623871739461,
            13.143729144399757
          ],
          [
            123.72534626730618,
            13.144469060671213
          ],
          [
            123.72458917790482,
            13.145086168580804
          ],
          [
            123.72379671256317,
            13.145699574745635
          ],
          [
            123.72307297306281,
            13.146266299429243
          ],
          [
            123.72285659733723,
            13.146440675991485
          ],
          [
            123.72241222905723,
            13.146768849568517
          ],
          [
            123.72188994282044,
            13.14718662568616
          ],
          [
            123.72158403230935,
            13.147404595551464
          ],
          [
            123.72130796672809,
            13.147644362180486
          ],
          [
            123.72121843194401,
            13.147709753038285
          ],
          [
            123.72111397469638,
            13.14777151105477
          ],
          [
            123.72095355821034,
            13.147836901879373
          ],
          [
            123.72048234610327,
            13.147957907881874
          ],
          [
            123.7200122888512,
            13.148074157986684
          ],
          [
            123.71941912090972,
            13.14821947072619
          ],
          [
            123.71872522778915,
            13.14843017385445
          ],
          [
            123.7175607593365,
            13.148739928488666
          ],
          [
            123.7172800898922,
            13.148816995528236
          ],
          [
            123.71712808632003,
            13.14885758122027
          ],
          [
            123.71690008096112,
            13.148905329086361
          ],
          [
            123.71691479098388,
            13.149039023057028
          ],
          [
            123.71678185214631,
            13.149762151235024
          ],
          [
            123.71657882625674,
            13.149723550572936
          ],
          [
            123.71634669888465,
            13.149670432590739
          ],
          [
            123.71621107823518,
            13.149636824237732
          ],
          [
            123.71607098285415,
            13.149601173154593
          ],
          [
            123.71587909753828,
            13.149555516714372
          ],
          [
            123.71551760106695,
            13.149486039747643
          ],
          [
            123.71501866628086,
            13.149354602166852
          ],
          [
            123.71475659670523,
            13.149278022038374
          ],
          [
            123.71405513326454,
            13.149100421549406
          ],
          [
            123.71395974121543,
            13.1490634922867
          ],
          [
            123.71330852361183,
            13.148846655967816
          ],
          [
            123.71322869693819,
            13.148830290955203
          ],
          [
            123.71295980708908,
            13.148748465873695
          ],
          [
            123.71271463644922,
            13.14870029567436
          ],
          [
            123.7124919620419,
            13.148630744320357
          ],
          [
            123.71164846739975,
            13.148332620686404
          ],
          [
            123.71137939924267,
            13.148508402424056
          ],
          [
            123.7113487459078,
            13.148554835313547
          ],
          [
            123.71122272664485,
            13.148727300259637
          ],
          [
            123.71108352476028,
            13.149039063179174
          ],
          [
            123.71101723991251,
            13.150276392453236
          ],
          [
            123.71103491403363,
            13.15060220699769
          ],
          [
            123.71108795268276,
            13.151044158948395
          ],
          [
            123.7111409120588,
            13.151489874532857
          ],
          [
            123.71120143705986,
            13.151869284683144
          ],
          [
            123.71122447050487,
            13.152135101238017
          ],
          [
            123.71120933925494,
            13.152658170012757
          ],
          [
            123.71117930201473,
            13.153766099912772
          ],
          [
            123.71115795983485,
            13.15439791592621
          ],
          [
            123.7111392416802,
            13.154519429209543
          ],
          [
            123.71186924973165,
            13.154604488472756
          ],
          [
            123.71211882513211,
            13.154653093752628
          ],
          [
            123.71276147662388,
            13.154780681088042
          ],
          [
            123.71352268159984,
            13.154890042875238
          ],
          [
            123.71402807178805,
            13.155005480264265
          ],
          [
            123.71410918401745,
            13.155023709574408
          ],
          [
            123.71491533479679,
            13.155344197502387
          ],
          [
            123.71519066777006,
            13.155427403200562
          ],
          [
            123.71593121852948,
            13.155529099016121
          ],
          [
            123.71726041220029,
            13.155723245455249
          ],
          [
            123.7175452394157,
            13.155824941148055
          ],
          [
            123.7177446184669,
            13.156305683850903
          ],
          [
            123.71782057239079,
            13.156472094567278
          ],
          [
            123.71819084777047,
            13.156841895753757
          ],
          [
            123.71828579017506,
            13.156906610904258
          ],
          [
            123.7184187095425,
            13.157017551122124
          ],
          [
            123.71887443308646,
            13.157257921422314
          ],
          [
            123.7193206564342,
            13.15731338554734
          ],
          [
            123.71943458732108,
            13.15731338554734
          ],
          [
            123.71954851820618,
            13.157331875556878
          ],
          [
            123.71971941453648,
            13.157331875556878
          ],
          [
            123.72006120719357,
            13.15737810057334
          ],
          [
            123.72081125219324,
            13.157415080580378
          ],
          [
            123.72097265428152,
            13.157405835579382
          ],
          [
            123.72121001029552,
            13.157442815582257
          ],
          [
            123.7214283778273,
            13.157442815582257
          ],
          [
            123.7221024689029,
            13.15749828557567
          ],
          [
            123.72237780027524,
            13.157507526530523
          ],
          [
            123.72293796046404,
            13.157489036535097
          ],
          [
            123.72329874160346,
            13.157461301538476
          ],
          [
            123.72370699394605,
            13.15738734153274
          ],
          [
            123.72439293319292,
            13.157204350977366
          ],
          [
            123.72483644110605,
            13.157055897176463
          ],
          [
            123.72525222977276,
            13.156873703752098
          ],
          [
            123.72564850266843,
            13.15668793719675
          ],
          [
            123.72578016907926,
            13.156640701806637
          ],
          [
            123.72600885284749,
            13.156512491417075
          ],
          [
            123.72636227321419,
            13.156350541353603
          ],
          [
            123.72669490414802,
            13.15620208703686
          ],
          [
            123.72681964074917,
            13.156148103626307
          ],
          [
            123.72721463998306,
            13.156094120203917
          ],
          [
            123.72799077882871,
            13.156107616060325
          ],
          [
            123.72821559062027,
            13.156094123511565
          ],
          [
            123.72834032722147,
            13.156094123511565
          ],
          [
            123.72928971134502,
            13.156094123511565
          ],
          [
            123.73048985735181,
            13.156088430760704
          ],
          [
            123.7312360695642,
            13.156075098156691
          ],
          [
            123.73142091112078,
            13.156101763362685
          ],
          [
            123.73164682857919,
            13.156181758960813
          ],
          [
            123.73196174382491,
            13.156381747843724
          ],
          [
            123.73423534128216,
            13.157844445570333
          ],
          [
            123.73441666168247,
            13.15808520926862
          ],
          [
            123.73441666168247,
            13.158309921840015
          ],
          [
            123.73442490351863,
            13.158695142911583
          ],
          [
            123.73443314228734,
            13.159882904998042
          ],
          [
            123.73487820145112,
            13.160035387432004
          ],
          [
            123.73524908408803,
            13.160179844388097
          ],
          [
            123.7356034830525,
            13.160364428152164
          ],
          [
            123.73667638864953,
            13.161009558510301
          ],
          [
            123.73718772195554,
            13.161320015268842
          ],
          [
            123.73787257241094,
            13.161754676419761
          ],
          [
            123.7379748390722,
            13.161824968337186
          ],
          [
            123.73851624855797,
            13.16217335611735
          ],
          [
            123.73873882893776,
            13.162302224396285
          ],
          [
            123.73905164460717,
            13.162507241972165
          ],
          [
            123.7393736856879,
            13.162699456826502
          ],
          [
            123.7398177037573,
            13.162972917451555
          ],
          [
            123.74024921988735,
            13.16323480382286
          ],
          [
            123.74042232121008,
            13.163307691649393
          ],
          [
            123.74060711856686,
            13.163341857810664
          ],
          [
            123.74088080579105,
            13.163373746223598
          ],
          [
            123.74102349742026,
            13.163364635248314
          ],
          [
            123.74142404400266,
            13.163374222846343
          ],
          [
            123.74293813230975,
            13.163386446017242
          ],
          [
            123.74320761461979,
            13.163359825567412
          ],
          [
            123.74343804152363,
            13.16330278173659
          ],
          [
            123.7435825465302,
            13.163226723274605
          ],
          [
            123.74418399980357,
            13.162850233541477
          ],
          [
            123.7445159766504,
            13.162652478381744
          ],
          [
            123.74494558613122,
            13.162431908192033
          ],
          [
            123.74505494127214,
            13.162386272956056
          ],
          [
            123.74562515021887,
            13.162222746622206
          ],
          [
            123.74598445996673,
            13.162158096646436
          ],
          [
            123.74674603944413,
            13.162013585630547
          ],
          [
            123.74687492228969,
            13.16196034442953
          ],
          [
            123.74694522202276,
            13.161861467883284
          ],
          [
            123.74696469835692,
            13.161578420641689
          ],
          [
            123.74696469835692,
            13.16083090690644
          ],
          [
            123.74697918284915,
            13.160661658197156
          ],
          [
            123.74703535332395,
            13.160564681301992
          ],
          [
            123.74752235132172,
            13.160562929729792
          ],
          [
            123.7479134326216,
            13.16056998176434
          ],
          [
            123.74861593051162,
            13.160598189901236
          ],
          [
            123.74910116201386,
            13.160612299900663
          ],
          [
            123.74942706309736,
            13.160612299900663
          ],
          [
            123.75038303960832,
            13.16064756006503
          ],
          [
            123.75120062205076,
            13.160604564193378
          ],
          [
            123.75116889797886,
            13.160069250232041
          ],
          [
            123.7511424675352,
            13.159575112333016
          ],
          [
            123.75113718144445,
            13.159214802820628
          ],
          [
            123.75112755736762,
            13.159019714082746
          ],
          [
            123.75112755736762,
            13.158638814575667
          ],
          [
            123.75112227127892,
            13.158283650989745
          ],
          [
            123.75112226847563,
            13.157897602587354
          ],
          [
            123.75111169629815,
            13.157691710093175
          ],
          [
            123.75111698238692,
            13.157506406699994
          ],
          [
            123.75111513739273,
            13.157249718236656
          ],
          [
            123.75114685392708,
            13.156786458657137
          ],
          [
            123.75115213819674,
            13.156465067496342
          ],
          [
            123.75117856864046,
            13.156217995038489
          ],
          [
            123.75124728779593,
            13.155322355290053
          ],
          [
            123.75130715691466,
            13.154603806618667
          ],
          [
            123.75136105607794,
            13.154478842720962
          ],
          [
            123.7515484198372,
            13.154253907543932
          ],
          [
            123.7516279852681,
            13.154158934852205
          ],
          [
            123.75203015091847,
            13.153589360457474
          ],
          [
            123.75215173096132,
            13.153290811037735
          ],
          [
            123.7524182320094,
            13.152293950532226
          ],
          [
            123.7525556703203,
            13.151815239274157
          ],
          [
            123.75266139209697,
            13.151439476019405
          ],
          [
            123.75269839472008,
            13.15132623218561
          ],
          [
            123.75302931223086,
            13.150178408932064
          ],
          [
            123.75262421767985,
            13.150111599766632
          ],
          [
            123.75200318966301,
            13.149966639360485
          ],
          [
            123.75172831351506,
            13.148808453967561
          ],
          [
            123.7517018830714,
            13.148643733879766
          ],
          [
            123.75172831351506,
            13.148479013681381
          ],
          [
            123.7521182194136,
            13.148012978551947
          ],
          [
            123.75271026136528,
            13.147307767611125
          ],
          [
            123.75274784418463,
            13.147239478478895
          ],
          [
            123.75276324394525,
            13.147204487542993
          ],
          [
            123.75267341200532,
            13.147092016644066
          ],
          [
            123.75257074693246,
            13.146967048918427
          ],
          [
            123.75248091499253,
            13.146822086276416
          ],
          [
            123.7524664314858,
            13.146717877273417
          ],
          [
            123.75246419984711,
            13.146675198579842
          ]
                    ],
                    'type': 'LineString'
                }
            }
        ]
    };

    map.on('load', () => {
        map.addSource('line', {
            type: 'geojson',
            data: geojson
        });

        // add a line layer without line-dasharray defined to fill the gaps in the dashed line
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-background',
            paint: {
                'line-color': 'orange',
                'line-width': 6,
                'line-opacity': 0.4
            }
        });

        // add a line layer with line-dasharray set to the first value in dashArraySequence
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-dashed',
            paint: {
                'line-color': 'orange',
                'line-width': 6,
                'line-dasharray': [0, 4, 3]
            }
        });

        // technique based on https://jsfiddle.net/2mws8y3q/
        // an array of valid line-dasharray values, specifying the lengths of the alternating dashes and gaps that form the dash pattern
        const dashArraySequence = [
            [0, 4, 3],
            [0.5, 4, 2.5],
            [1, 4, 2],
            [1.5, 4, 1.5],
            [2, 4, 1],
            [2.5, 4, 0.5],
            [3, 4, 0],
            [0, 0.5, 3, 3.5],
            [0, 1, 3, 3],
            [0, 1.5, 3, 2.5],
            [0, 2, 3, 2],
            [0, 2.5, 3, 1.5],
            [0, 3, 3, 1],
            [0, 3.5, 3, 0.5]
        ];

        let step = 0;

        function animateDashArray(timestamp) {
            // Update line-dasharray using the next value in dashArraySequence. The
            // divisor in the expression `timestamp / 50` controls the animation speed.
            const newStep = parseInt(
                (timestamp / 50) % dashArraySequence.length
            );

            if (newStep !== step) {
                map.setPaintProperty(
                    'line-dashed',
                    'line-dasharray',
                    dashArraySequence[step]
                );
                step = newStep;
            }

            // Request the next frame of the animation.
            requestAnimationFrame(animateDashArray);
        }

        // start the animation
        animateDashArray(0);
    });

    // Add another line path of Diretso to Legazpi Jeepney Route
    const origin = [123.7167569574899,13.1497465238183]; // Daraga
    const destination = [123.71690599186309,13.14893685865053]; // Legazpi City


</script>

</body>
</html>