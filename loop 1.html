<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>LUNAD:Loop 1</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
</style>
</head>
<body>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZml0emtlbmpvaG4iLCJhIjoiY2xxcWp2MWw1M3VwYjJtbm05dnc4eHY4MSJ9.kTofeMVuyWEX7X5NFU5kYg';
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        // Choose from Mapbox's core styles, or make your own style with Mapbox Studio
        style: 'mapbox://styles/mapbox/dark-v11', // style URL
        center: [123.740953,13.154756], // starting position [lng, lat]
        zoom: 13.5 // starting zoom
    });

    const geojson = {
        'type': 'FeatureCollection',
        'features': [
            {
                'type': 'Feature',
                'properties': {},
                'geometry': {
                    'coordinates': [
                    [
            123.7116463197824,
            13.148339649093401
          ],
          [
            123.71198654618422,
            13.14806490641449
          ],
          [
            123.71206952823314,
            13.147927534959976
          ],
          [
            123.71226453604908,
            13.147967938336805
          ],
          [
            123.71245124566025,
            13.14804470473527
          ],
          [
            123.71254667501626,
            13.148097229098568
          ],
          [
            123.71269189360373,
            13.148141672782629
          ],
          [
            123.71345117935391,
            13.148404294384804
          ],
          [
            123.7141108863006,
            13.148634593281685
          ],
          [
            123.71421876296529,
            13.14867095621635
          ],
          [
            123.71440547257487,
            13.148739641745038
          ],
          [
            123.71508592538004,
            13.148973980462983
          ],
          [
            123.7153805116543,
            13.148982061105002
          ],
          [
            123.71690546424361,
            13.148886898132403
          ],
          [
            123.71712536667525,
            13.14885457555242
          ],
          [
            123.71727473436357,
            13.148806091674118
          ],
          [
            123.71756102243467,
            13.148741446488629
          ],
          [
            123.7187203907817,
            13.148417074733544
          ],
          [
            123.71941329089236,
            13.148215058152061
          ],
          [
            123.72002494653134,
            13.148064266388914
          ],
          [
            123.72048549690498,
            13.147951136961382
          ],
          [
            123.72084231971616,
            13.147866289855855
          ],
          [
            123.7209875383038,
            13.147842047820191
          ],
          [
            123.72114520419683,
            13.14774911999531
          ],
          [
            123.72121158983623,
            13.147712756924008
          ],
          [
            123.72131946650092,
            13.147644071107763
          ],
          [
            123.72157671085381,
            13.147413771465637
          ],
          [
            123.72186714693532,
            13.147187512714169
          ],
          [
            123.72240238115307,
            13.14677943700191
          ],
          [
            123.72285463332184,
            13.146452167870436
          ],
          [
            123.72307431875652,
            13.146266523836132
          ],
          [
            123.72378796438068,
            13.145692791279302
          ],
          [
            123.72459288942423,
            13.145098855759969
          ],
          [
            123.72535332310474,
            13.14445823641826
          ],
          [
            123.72590515373184,
            13.143989550130172
          ],
          [
            123.72622608029582,
            13.143734293161785
          ],
          [
            123.72703100557203,
            13.14312015072342
          ],
          [
            123.72817138387626,
            13.142424756766616
          ],
          [
            123.72850331207337,
            13.142246977840898
          ],
          [
            123.72871491629871,
            13.142101522261115
          ],
          [
            123.72920451039045,
            13.141495456414873
          ],
          [
            123.7298435818123,
            13.14077968253288
          ],
          [
            123.7299099674517,
            13.14071099477573
          ],
          [
            123.7300551860377,
            13.140569578743992
          ],
          [
            123.73044241034779,
            13.140211790329275
          ],
          [
            123.73122244161135,
            13.1396420840899
          ],
          [
            123.7315054012509,
            13.139448100816963
          ],
          [
            123.73187882047324,
            13.1392460768501
          ],
          [
            123.73237671276962,
            13.13902789077953
          ],
          [
            123.73264225532733,
            13.138866271343119
          ],
          [
            123.73278332481084,
            13.138805664026904
          ],
          [
            123.7328497104503,
            13.138805664026904
          ],
          [
            123.73321483146793,
            13.138793542562183
          ],
          [
            123.73372822976722,
            13.138779012235346
          ],
          [
            123.73384030142734,
            13.138771736375617
          ],
          [
            123.73398599458449,
            13.138662598462304
          ],
          [
            123.73409059480082,
            13.138546184634123
          ],
          [
            123.73426617373485,
            13.138466150094999
          ],
          [
            123.73484894636675,
            13.138469788029084
          ],
          [
            123.73516031629464,
            13.138480195719069
          ],
          [
            123.73535830956149,
            13.138502023322062
          ],
          [
            123.7360718324631,
            13.138509299189124
          ],
          [
            123.73709035390522,
            13.138523852541809
          ],
          [
            123.73740789027454,
            13.138512938741187
          ],
          [
            123.73802716420454,
            13.13853476767369
          ],
          [
            123.73911799560068,
            13.138563873190733
          ],
          [
            123.73967461817932,
            13.138560235258097
          ],
          [
            123.7398240470585,
            13.138567511123384
          ],
          [
            123.74118385174108,
            13.138643911514677
          ],
          [
            123.74160529132581,
            13.138698794426972
          ],
          [
            123.74218806395777,
            13.138800656466685
          ],
          [
            123.7423038713398,
            13.13881157025385
          ],
          [
            123.74362599356073,
            13.139037123352267
          ],
          [
            123.74375674383037,
            13.139058950905735
          ],
          [
            123.74382772254944,
            13.139073502607275
          ],
          [
            123.74401824437103,
            13.139098968082266
          ],
          [
            123.74461629118917,
            13.139194206423795
          ],
          [
            123.7448030772888,
            13.139216033963365
          ],
          [
            123.7453447569784,
            13.139499791798684
          ],
          [
            123.74620023262435,
            13.139987278159225
          ],
          [
            123.74640569733344,
            13.140110967123476
          ],
          [
            123.74674191231384,
            13.140292862545977
          ],
          [
            123.74692869841357,
            13.140387448113032
          ],
          [
            123.74748221997538,
            13.1406922343905
          ],
          [
            123.74814745026009,
            13.141035354746407
          ],
          [
            123.7483192934721,
            13.141119026342494
          ],
          [
            123.74863309412098,
            13.14128273155616
          ],
          [
            123.74887217850687,
            13.141391870565059
          ],
          [
            123.74905149316277,
            13.141482817818456
          ],
          [
            123.7499854232621,
            13.141744746488627
          ],
          [
            123.75044491718063,
            13.14187571091793
          ],
          [
            123.75053457450781,
            13.14190117610218
          ],
          [
            123.75084463943472,
            13.141988485284998
          ],
          [
            123.75088946809905,
            13.142028501983177
          ],
          [
            123.75135136159997,
            13.142278215982401
          ],
          [
            123.75153814769959,
            13.142376438660406
          ],
          [
            123.75175108385417,
            13.142536505161544
          ],
          [
            123.75204405520685,
            13.142812175613173
          ],
          [
            123.75248113468012,
            13.14343788841515
          ],
          [
            123.75254464075385,
            13.143547024207209
          ],
          [
            123.75269033391106,
            13.1437361927956
          ],
          [
            123.75279866984931,
            13.143983566883392
          ],
          [
            123.75300413453192,
            13.14433643883521
          ],
          [
            123.7530676418059,
            13.144543796036345
          ],
          [
            123.75317224202212,
            13.144551071724251
          ],
          [
            123.75329178512607,
            13.144652931334193
          ],
          [
            123.75340385678618,
            13.144834823390667
          ],
          [
            123.7535227227304,
            13.145112516844492
          ],
          [
            123.7535750228385,
            13.14530532205795
          ],
          [
            123.75364973727812,
            13.145596348509642
          ],
          [
            123.75367962305347,
            13.145763688562766
          ],
          [
            123.75367215160958,
            13.145905563735766
          ],
          [
            123.75364930076455,
            13.146059909277056
          ],
          [
            123.7536007363783,
            13.146154492621093
          ],
          [
            123.75346251515924,
            13.146543738842922
          ],
          [
            123.75409385217745,
            13.146627408559922
          ],
          [
            123.75369996935103,
            13.147818370739856
          ],
          [
            123.75348470361257,
            13.14853567292603
          ],
          [
            123.75341743326044,
            13.148785822155318
          ],
          [
            123.75339052504256,
            13.149021646833361
          ],
          [
            123.75337034388008,
            13.149067501605558
          ],
          [
            123.75335016271623,
            13.149136283747197
          ],
          [
            123.753042038893,
            13.150179871079999
          ],
          [
            123.75272252062115,
            13.151319649576052
          ],
          [
            123.7526922488774,
            13.151440836033345
          ],
          [
            123.75258509169441,
            13.151794584912807
          ],
          [
            123.75244046002592,
            13.152295705933582
          ],
          [
            123.75216615965536,
            13.153292465627302
          ],
          [
            123.75212857595642,
            13.153404678560022
          ],
          [
            123.75211175831976,
            13.153480010049506
          ],
          [
            123.75206130541221,
            13.15357499319704
          ],
          [
            123.75189649258124,
            13.153823914377568
          ],
          [
            123.75164422761588,
            13.154152138004576
          ],
          [
            123.75139869013367,
            13.15446001343949
          ],
          [
            123.75132132900819,
            13.154640153142978
          ],
          [
            123.75124737013999,
            13.155291779337333
          ],
          [
            123.7511935274079,
            13.156212199897624
          ],
          [
            123.75117670977119,
            13.156470944125303
          ],
          [
            123.75116325566279,
            13.156772266172993
          ],
          [
            123.75113557897947,
            13.157252040280042
          ],
          [
            123.75113557897947,
            13.157907085649697
          ],
          [
            123.75112885181971,
            13.15827115300003
          ],
          [
            123.7511490329835,
            13.158651077947226
          ],
          [
            123.75115576003765,
            13.159017901475607
          ],
          [
            123.75117594120013,
            13.15919803782937
          ],
          [
            123.7511659368704,
            13.159568007820937
          ],
          [
            123.75118275450575,
            13.160056012175119
          ],
          [
            123.75120966272368,
            13.160593143362291
          ],
          [
            123.75039232768916,
            13.160652093372875
          ],
          [
            123.7494135412835,
            13.160609515953766
          ],
          [
            123.74909941554813,
            13.160585372635737
          ],
          [
            123.74860834058109,
            13.160572271888995
          ],
          [
            123.74793563514896,
            13.160539520017835
          ],
          [
            123.74751945862323,
            13.160559736258293
          ],
          [
            123.7471696517976,
            13.160546635510201
          ],
          [
            123.74704183776589,
            13.160559736258293
          ],
          [
            123.74698802133122,
            13.160644891106372
          ],
          [
            123.74697456722288,
            13.161136168495233
          ],
          [
            123.74696447709857,
            13.161748624127895
          ],
          [
            123.74693756888064,
            13.161869805429177
          ],
          [
            123.74682993601141,
            13.161984436334777
          ],
          [
            123.74666848670762,
            13.162030288682288
          ],
          [
            123.7459823410241,
            13.162154741968536
          ],
          [
            123.74562244361721,
            13.162230070768658
          ],
          [
            123.74527263679147,
            13.16232177536186
          ],
          [
            123.7450640981072,
            13.162374177971742
          ],
          [
            123.74452929728807,
            13.162646016331266
          ],
          [
            123.74361778556369,
            13.163212616620513
          ],
          [
            123.74351015269445,
            13.163278119642555
          ],
          [
            123.74341597393345,
            13.163317421447871
          ],
          [
            123.74323434346712,
            13.163356723246864
          ],
          [
            123.7428105390444,
            13.163386199591045
          ],
          [
            123.7423934616757,
            13.16339274989052
          ],
          [
            123.7414214076253,
            13.16337637346382
          ],
          [
            123.74080924568068,
            13.163366548015745
          ],
          [
            123.7406948857573,
            13.163366548015745
          ],
          [
            123.74055025408882,
            13.163333796519353
          ],
          [
            123.74025762722482,
            13.163248642605822
          ],
          [
            123.73981364324982,
            13.162976804685698
          ],
          [
            123.73937756710353,
            13.162701097033647
          ],
          [
            123.73904891138477,
            13.16249923751134
          ],
          [
            123.73873542439117,
            13.162292454412778
          ],
          [
            123.73852811847541,
            13.162164445741126
          ],
          [
            123.73797698814354,
            13.161819806257952
          ],
          [
            123.7378809195472,
            13.161770572066587
          ],
          [
            123.73721855175705,
            13.161342233754851
          ],
          [
            123.73716293309633,
            13.161317616612891
          ],
          [
            123.73668764636426,
            13.161022210708836
          ],
          [
            123.73560055641462,
            13.160382163862167
          ],
          [
            123.73536796929028,
            13.16023938384113
          ],
          [
            123.73523145076229,
            13.160180302428486
          ],
          [
            123.7348724575914,
            13.160042445745049
          ],
          [
            123.73442245349133,
            13.159884895683462
          ],
          [
            123.73443256708862,
            13.158314308160072
          ],
          [
            123.7344072858782,
            13.158102598037743
          ],
          [
            123.73433649849238,
            13.15790565822455
          ],
          [
            123.73394716787124,
            13.157654559732649
          ],
          [
            123.73311795182906,
            13.157147441059209
          ],
          [
            123.73279940859379,
            13.156911112343352
          ],
          [
            123.73268817127234,
            13.156837259572853
          ],
          [
            123.73254659650263,
            13.15675355973957
          ],
          [
            123.73213198467101,
            13.156487689490802
          ],
          [
            123.73193479124063,
            13.156369524843313
          ],
          [
            123.73159745371282,
            13.156184046057462
          ],
          [
            123.73150644136018,
            13.156139734266574
          ],
          [
            123.7314204852492,
            13.156110193067875
          ],
          [
            123.73049519299366,
            13.156080651866546
          ],
          [
            123.72929752018979,
            13.156082794238998
          ],
          [
            123.72833683424221,
            13.156092641307353
          ],
          [
            123.728205371954,
            13.156082794238998
          ],
          [
            123.72802334724872,
            13.156077870705175
          ],
          [
            123.72747740878407,
            13.156090114086254
          ],
          [
            123.72720942796781,
            13.156099961153402
          ],
          [
            123.72698189708518,
            13.15611965528646
          ],
          [
            123.72686560352207,
            13.15612950235331
          ],
          [
            123.72670380378355,
            13.156188584741557
          ],
          [
            123.72635997933975,
            13.156336290651254
          ],
          [
            123.72599592992714,
            13.156513537625628
          ],
          [
            123.72577345528623,
            13.15662185515697
          ],
          [
            123.72563188051652,
            13.156680937427438
          ],
          [
            123.7252285577215,
            13.156871962867129
          ],
          [
            123.72482422352607,
            13.157036428391436
          ],
          [
            123.72370799442456,
            13.15736861574598
          ],
          [
            123.72328386312688,
            13.157459716147585
          ],
          [
            123.72293458202921,
            13.157477936423277
          ],
          [
            123.72237323740518,
            13.15748400984819
          ],
          [
            123.72204890495681,
            13.157490083273004
          ],
          [
            123.72141895154476,
            13.157447569296394
          ],
          [
            123.72095116435798,
            13.15741720216461
          ],
          [
            123.71929831646685,
            13.157283585417403
          ],
          [
            123.7188741894164,
            13.157234997972893
          ],
          [
            123.71867460021707,
            13.157162116788612
          ],
          [
            123.71849995966943,
            13.1570953090161
          ],
          [
            123.71841887655677,
            13.157028501226506
          ],
          [
            123.71828789614307,
            13.15694347310351
          ],
          [
            123.71806335829444,
            13.156773416768985
          ],
          [
            123.71781387179635,
            13.156439377197984
          ],
          [
            123.71755191097134,
            13.155856325219972
          ],
          [
            123.71751039900613,
            13.155812182341094
          ],
          [
            123.71740858401336,
            13.155756824391588
          ],
          [
            123.71727461057105,
            13.155710945407932
          ],
          [
            123.7170947838627,
            13.155689429673771
          ],
          [
            123.71688181335463,
            13.155659415427465
          ],
          [
            123.71651155631343,
            13.155592784041161
          ],
          [
            123.71627869824323,
            13.155568142666809
          ],
          [
            123.7159380004282,
            13.155531615643554
          ],
          [
            123.71515219964255,
            13.155420886110875
          ],
          [
            123.71493859725024,
            13.155333658152642
          ],
          [
            123.71473762701555,
            13.155244265078991
          ],
          [
            123.71461749773613,
            13.155192613538475
          ],
          [
            123.71430271011934,
            13.155067396253088
          ],
          [
            123.71410323911167,
            13.155008417629958
          ],
          [
            123.71401916582596,
            13.154979883897525
          ],
          [
            123.7135040054689,
            13.15487337240343
          ],
          [
            123.71275486315628,
            13.15474138439252
          ],
          [
            123.71188180220088,
            13.154621481409457
          ],
          [
            123.71157269959957,
            13.154573458678598
          ],
          [
            123.71117981366024,
            13.154505444247206
          ],
          [
            123.71116984816729,
            13.153823425673309
          ],
          [
            123.71117284033102,
            13.153747445275684
          ],
          [
            123.7112070223416,
            13.152656363249859
          ],
          [
            123.71122667960252,
            13.152127174155964
          ],
          [
            123.7110788389505,
            13.151029218143869
          ],
          [
            123.71101988534403,
            13.150274251909686
          ],
          [
            123.71106486605973,
            13.149026716296886
          ],
          [
            123.71123316099043,
            13.148745544537622
          ],
          [
            123.71131214180761,
            13.148589842559996
          ],
          [
            123.71140330868678,
            13.14850138456933
          ],
          [
            123.711646572767,
            13.14834029073107
          ]
                    ],
                    'type': 'LineString'
                }
            }
        ]
    };

    map.on('load', () => {
        map.addSource('line', {
            type: 'geojson',
            data: geojson
        });

        // add a line layer without line-dasharray defined to fill the gaps in the dashed line
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-background',
            paint: {
                'line-color': 'blue',
                'line-width': 6,
                'line-opacity': 0.4
            }
        });

        // add a line layer with line-dasharray set to the first value in dashArraySequence
        map.addLayer({
            type: 'line',
            source: 'line',
            id: 'line-dashed',
            paint: {
                'line-color': 'blue',
                'line-width': 6,
                'line-dasharray': [0, 4, 3]
            }
        });

        // technique based on https://jsfiddle.net/2mws8y3q/
        // an array of valid line-dasharray values, specifying the lengths of the alternating dashes and gaps that form the dash pattern
        const dashArraySequence = [
            [0, 4, 3],
            [0.5, 4, 2.5],
            [1, 4, 2],
            [1.5, 4, 1.5],
            [2, 4, 1],
            [2.5, 4, 0.5],
            [3, 4, 0],
            [0, 0.5, 3, 3.5],
            [0, 1, 3, 3],
            [0, 1.5, 3, 2.5],
            [0, 2, 3, 2],
            [0, 2.5, 3, 1.5],
            [0, 3, 3, 1],
            [0, 3.5, 3, 0.5]
        ];

        let step = 0;

        function animateDashArray(timestamp) {
            // Update line-dasharray using the next value in dashArraySequence. The
            // divisor in the expression `timestamp / 50` controls the animation speed.
            const newStep = parseInt(
                (timestamp / 50) % dashArraySequence.length
            );

            if (newStep !== step) {
                map.setPaintProperty(
                    'line-dashed',
                    'line-dasharray',
                    dashArraySequence[step]
                );
                step = newStep;
            }

            // Request the next frame of the animation.
            requestAnimationFrame(animateDashArray);
        }

        // start the animation
        animateDashArray(0);
    });

    // Add another line path of Diretso to Legazpi Jeepney Route
    const origin = [123.7167569574899,13.1497465238183]; // Daraga
    const destination = [123.71690599186309,13.14893685865053]; // Legazpi City


</script>

</body>
</html>